{% comment %}
  Testimonios Slider - Con videos y deslizamiento horizontal para móvil y escritorio
{% endcomment %}

<section class="testimonios-slider">
  <div class="container-slider">
    <!-- Título de la sección con línea decorativa -->
    <div class="titulo-testimonios">
      <h2>{{ section.settings.testimonios_title }}</h2>
      <div class="linea-titulo-testimonios"></div>
    </div>

    <!-- Controles de navegación del slider -->
    <div class="slider-controls">
      <button class="slider-arrow prev-arrow" aria-label="Testimonio anterior">
        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
          <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path>
        </svg>
      </button>

      <!-- Contenedor del slider -->
      <div class="testimonios-wrapper">
        <div class="testimonios-track">
          {% for block in section.blocks %}
            {% if block.type == 'testimonio_texto' %}
              <div class="testimonio-slide" {{ block.shopify_attributes }}>
                <div class="testimonio-card">
                  <div class="testimonio-header">
                    {% if block.settings.imagen_perfil != blank %}
                      <div class="testimonio-avatar">
                        <img
                          src="{{ block.settings.imagen_perfil | img_url: '100x100', crop: 'center' }}"
                          alt="{{ block.settings.autor }}"
                          width="{{ section.settings.avatar_size }}"
                          height="{{ section.settings.avatar_size }}"
                          style="border-radius: {{ section.settings.avatar_border_radius }}px;"
                        >
                      </div>
                    {% else %}
                      <div
                        class="testimonio-logo"
                        style="width: {{ section.settings.avatar_size }}px; height: {{ section.settings.avatar_size }}px; border-radius: {{ section.settings.avatar_border_radius }}px;"
                      >
                        {{ block.settings.autor | slice: 0, 1 }}
                      </div>
                    {% endif %}
                  </div>
                  <div class="testimonio-content">
                    <p class="testimonio-text">"{{ block.settings.testimonio }}"</p>
                    <p class="testimonio-author">- {{ block.settings.autor }}</p>
                  </div>
                </div>
              </div>
            {% elsif block.type == 'testimonio_video' %}
              <div class="testimonio-slide video-slide" {{ block.shopify_attributes }}>
                <div class="testimonio-card video-card">
                  <div class="testimonio-video-container">
                    {% if block.settings.video_url != blank %}
                      {% if block.settings.video_url contains 'youtube.com'
                        or block.settings.video_url contains 'youtu.be'
                      %}
                        <iframe
                          src="{{ block.settings.video_url | replace: 'watch?v=', 'embed/' | split: '&' | first }}"
                          frameborder="0"
                          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                          allowfullscreen
                        >
                        </iframe>
                      {% elsif block.settings.video_url contains 'vimeo.com' %}
                        <iframe
                          src="{{ block.settings.video_url | replace: 'vimeo.com', 'player.vimeo.com/video' }}"
                          frameborder="0"
                          allow="autoplay; fullscreen; picture-in-picture"
                          allowfullscreen
                        >
                        </iframe>
                      {% endif %}
                    {% elsif block.settings.video_file != blank %}
                      <video controls>
                        <source src="{{ block.settings.video_file | file_url }}" type="video/mp4">
                        Tu navegador no soporta videos HTML5.
                      </video>
                    {% endif %}
                  </div>
                  <div class="testimonio-content">
                    <p class="testimonio-author">- {{ block.settings.autor }}</p>
                  </div>
                </div>
              </div>
            {% endif %}
          {% endfor %}
        </div>
      </div>

      <button class="slider-arrow next-arrow" aria-label="Siguiente testimonio">
        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
          <path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"></path>
        </svg>
      </button>
    </div>

    <!-- Indicadores de posición (dots) -->
    <div class="slider-dots">
      {% for block in section.blocks %}
        <button
          class="slider-dot{% if forloop.first %} active{% endif %}"
          data-index="{{ forloop.index0 }}"
          aria-label="Ver testimonio {{ forloop.index }}"
        ></button>
      {% endfor %}
    </div>

    <!-- Botón de WhatsApp -->
    <div class="testimonios-whatsapp-button" style="margin-top: {{ section.settings.button_spacing }}px;">
      <a
        href="{{ section.settings.button_link }}"
        class="whatsapp-button {% if section.settings.button_shake_effect %}con-sacudida{% endif %}"
      >
        <svg viewBox="0 0 24 24" width="24" height="24" fill="white">
          <path d="M17.498 14.382c-.301-.15-1.767-.867-2.04-.966-.273-.101-.473-.15-.673.15-.197.295-.771.964-.944 1.162-.175.195-.349.21-.646.075-.3-.15-1.263-.465-2.403-1.485-.888-.795-1.484-1.77-1.66-2.07-.174-.3-.019-.465.13-.615.136-.135.301-.345.451-.523.146-.181.194-.301.297-.496.1-.21.049-.375-.025-.524-.075-.15-.672-1.62-.922-2.206-.24-.584-.487-.51-.672-.51-.172-.015-.371-.015-.571-.015-.2 0-.523.074-.797.359-.273.3-1.045 1.02-1.045 2.475s1.07 2.865 1.219 3.075c.149.195 2.105 3.195 5.1 4.485.714.3 1.27.48 1.704.629.714.227 1.365.195 1.88.121.574-.091 1.767-.721 2.016-1.426.255-.705.255-1.29.18-1.425-.074-.135-.27-.21-.57-.345z"/>
        </svg>
        {{ section.settings.button_text }}
      </a>
    </div>
  </div>
</section>

<style>
  /* Reset de estilos */
  .testimonios-slider * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  /* Eliminación de pseudo-elementos */
  .testimonios-slider *:before,
  .testimonios-slider *:after {
    display: none !important;
    content: none !important;
  }

  /* Contenedor principal */
  .testimonios-slider {
    position: relative;
    width: 100%;
    padding: {{ section.settings.padding_top_mobile }}px 0 {{ section.settings.padding_bottom_mobile }}px;
    margin-bottom: {{ section.settings.margin_bottom_mobile }}px;
    background: linear-gradient({{ section.settings.gradient_angle }}deg,
                {{ section.settings.background_color_start }},
                {{ section.settings.background_color_end }});
    overflow: hidden;
  }

  .container-slider {
    max-width: {{ section.settings.container_width }}px;
    margin: 0 auto;
    padding: 0 {{ section.settings.container_padding }}px;
  }

  /* Título de la sección */
  .titulo-testimonios {
    text-align: center;
    margin-bottom: 30px;
    position: relative;
  }

  .titulo-testimonios h2 {
    font-size: {{ section.settings.title_size_mobile }}px;
    color: {{ section.settings.text_color }};
    margin: 0;
    padding: 0;
    font-weight: bold;
    display: inline-block;
  }

  .linea-titulo-testimonios {
    display: block;
    height: {{ section.settings.line_height }}px;
    width: {{ section.settings.line_width_mobile }}px;
    background-color: {{ section.settings.line_color }};
    margin: {{ section.settings.line_margin_top }}px auto 0;
  }

  /* Controles del slider */
  .slider-controls {
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    margin-bottom: 20px;
  }

  .slider-arrow {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: {{ section.settings.arrow_background_color }};
    color: {{ section.settings.arrow_color }};
    border: none;
    cursor: pointer;
    z-index: 2;
    transition: all 0.3s ease;
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  }

  .slider-arrow:hover {
    background-color: {{ section.settings.arrow_hover_background_color }};
    color: {{ section.settings.arrow_hover_color }};
  }

  .prev-arrow {
    left: 0;
  }

  .next-arrow {
    right: 0;
  }

  /* Contenedor del slider */
  .testimonios-wrapper {
    width: 100%;
    overflow: hidden;
    margin: 0 40px;
    position: relative;
  }

  .testimonios-track {
    display: flex;
    transition: transform 0.5s ease;
  }

  /* Slides de testimonios */
  .testimonio-slide {
    min-width: 100%;
    padding: 0 {{ section.settings.slide_spacing_mobile }}px;
    flex-shrink: 0;
  }

  /* Tarjetas de testimonios */
  .testimonio-card {
    background-color: {{ section.settings.card_background_color }};
    border-radius: {{ section.settings.card_border_radius }}px;
    box-shadow: {{ section.settings.card_shadow_x }}px {{ section.settings.card_shadow_y }}px {{ section.settings.card_shadow_blur }}px {{ section.settings.card_shadow_color }};
    padding: {{ section.settings.card_padding }}px;
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  /* Cabecera del testimonio */
  .testimonio-header {
    display: flex;
    justify-content: center;
    margin-bottom: 15px;
  }

  .testimonio-avatar img {
    width: {{ section.settings.avatar_size }}px;
    height: {{ section.settings.avatar_size }}px;
    object-fit: cover;
  }

  .testimonio-logo {
    width: {{ section.settings.avatar_size }}px;
    height: {{ section.settings.avatar_size }}px;
    background-color: {{ section.settings.avatar_background_color }};
    color: {{ section.settings.avatar_text_color }};
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: {{ section.settings.avatar_size | divided_by: 2 }}px;
    font-weight: bold;
  }

  /* Contenido del testimonio */
  .testimonio-content {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
  }

  .testimonio-text {
    font-size: {{ section.settings.text_size_mobile }}px;
    line-height: 1.5;
    color: {{ section.settings.text_color }};
    margin-bottom: 15px;
    flex-grow: 1;
  }

  .testimonio-author {
    font-size: {{ section.settings.author_size_mobile }}px;
    font-weight: 600;
    color: {{ section.settings.author_color }};
    text-align: right;
  }

  /* Estilo para testimonio con video */
  .testimonio-video-container {
    width: 100%;
    margin-bottom: 15px;
    position: relative;
    padding-bottom: 56.25%; /* Aspect ratio 16:9 */
    height: 0;
    overflow: hidden;
  }

  .testimonio-video-container iframe,
  .testimonio-video-container video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: {{ section.settings.video_border_radius }}px;
  }

  /* Indicadores de posición (dots) */
  .slider-dots {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-top: 20px;
  }

  .slider-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background-color: {{ section.settings.dot_color }};
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .slider-dot.active {
    background-color: {{ section.settings.dot_active_color }};
    width: 12px;
    height: 12px;
  }

  /* Botón de WhatsApp */
  .testimonios-whatsapp-button {
    text-align: center;
    margin-top: 30px;
  }

  .whatsapp-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background-color: {{ section.settings.button_color }};
    color: white;
    text-decoration: none;
    font-weight: bold;
    padding: {{ section.settings.button_padding_vertical }}px {{ section.settings.button_padding_horizontal }}px;
    border-radius: {{ section.settings.button_border_radius }}px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2), 0 6px 20px rgba(37, 211, 102, 0.3);
    text-transform: uppercase;
    font-size: {{ section.settings.button_text_size }}px;
    transition: all 0.3s ease;
  }

  .whatsapp-button svg {
    margin-right: 10px;
  }

  .whatsapp-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 14px rgba(0, 0, 0, 0.2), 0 8px 24px rgba(37, 211, 102, 0.4);
  }

  /* Efecto de sacudida para el botón */
  @keyframes sacudida {
    0% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
    20%, 40%, 60%, 80% { transform: translateX(5px); }
    100% { transform: translateX(0); }
  }

  .whatsapp-button.con-sacudida {
    animation: sacudida 2s cubic-bezier(0.36, 0.07, 0.19, 0.97) infinite;
  }

  .whatsapp-button.con-sacudida:hover {
    animation: none;
    transform: translateY(-2px);
  }

  /* Responsive para escritorio */
  @media screen and (min-width: 769px) {
    .testimonios-slider {
      padding: {{ section.settings.padding_top_desktop }}px 0 {{ section.settings.padding_bottom_desktop }}px;
      margin-bottom: {{ section.settings.margin_bottom_desktop }}px;
    }

    .titulo-testimonios h2 {
      font-size: {{ section.settings.title_size_desktop }}px;
    }

    .linea-titulo-testimonios {
      width: {{ section.settings.line_width_desktop }}px;
    }

    .testimonio-slide {
      {% if section.settings.slides_per_view_desktop == 1 %}
        min-width: 100%;
      {% elsif section.settings.slides_per_view_desktop == 2 %}
        min-width: 50%;
      {% elsif section.settings.slides_per_view_desktop == 3 %}
        min-width: 33.333%;
      {% endif %}
      padding: 0 {{ section.settings.slide_spacing_desktop }}px;
    }

    .testimonio-text {
      font-size: {{ section.settings.text_size_desktop }}px;
    }

    .testimonio-author {
      font-size: {{ section.settings.author_size_desktop }}px;
    }

    .slider-dots {
      margin-top: 30px;
    }
  }

  /* Soporte táctil para dispositivos móviles */
  @media (hover: none) {
    .testimonios-wrapper {
      cursor: grab;
    }

    .testimonios-wrapper:active {
      cursor: grabbing;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const sliders = document.querySelectorAll('.testimonios-slider');
    
    sliders.forEach(slider => {
      const track = slider.querySelector('.testimonios-track');
      const slides = slider.querySelectorAll('.testimonio-slide');
      const prevBtn = slider.querySelector('.prev-arrow');
      const nextBtn = slider.querySelector('.next-arrow');
      const dots = slider.querySelectorAll('.slider-dot');
      
      if (!track || !slides.length) return;
      
      let currentIndex = 0;
      let startX, startY, endX, endY;
      let isAutoplay = {{ section.settings.autoplay }};
      let autoplayInterval;
      let slidesPerView = 1;
      
      // Determinar slides por vista basado en el tamaño de pantalla
      function updateSlidesPerView() {
        if (window.innerWidth >= 769) {
          slidesPerView = {{ section.settings.slides_per_view_desktop }};
        } else {
          slidesPerView = 1;
        }
        goToSlide(currentIndex);
      }
      
      // Ir a un slide específico
      function goToSlide(index) {
        if (index < 0) {
          index = slides.length - slidesPerView;
        } else if (index > slides.length - slidesPerView) {
          index = 0;
        }
        
        currentIndex = index;
        const offset = -100 * currentIndex;
        track.style.transform = `translateX(${offset}%)`;
        
        // Actualizar dots
        dots.forEach((dot, i) => {
          dot.classList.toggle('active', i === currentIndex);
        });
      }
      
      // Iniciar/detener autoplay
      function toggleAutoplay() {
        if (isAutoplay) {
          if (autoplayInterval) clearInterval(autoplayInterval);
          autoplayInterval = setInterval(() => {
            goToSlide(currentIndex + 1);
          }, {{ section.settings.autoplay_speed }});
        } else {
          if (autoplayInterval) clearInterval(autoplayInterval);
        }
      }
      
      // Event listeners para botones
      if (prevBtn) {
        prevBtn.addEventListener('click', () => {
          goToSlide(currentIndex - 1);
          if (autoplayInterval) clearInterval(autoplayInterval);
          toggleAutoplay();
        });
      }
      
      if (nextBtn) {
        nextBtn.addEventListener('click', () => {
          goToSlide(currentIndex + 1);
          if (autoplayInterval) clearInterval(autoplayInterval);
          toggleAutoplay();
        });
      }
      
      // Event listeners para dots
      dots.forEach((dot, i) => {
        dot.addEventListener('click', () => {
          goToSlide(i);
          if (autoplayInterval) clearInterval(autoplayInterval);
          toggleAutoplay();
        });
      });
      
      // Soporte táctil (swipe)
      track.addEventListener('touchstart', e => {
        startX = e.touches[0].clientX;
        startY = e.touches[0].clientY;
        if (autoplayInterval) clearInterval(autoplayInterval);
      }, { passive: true });
      
      track.addEventListener('touchmove', e => {
        if (!startX || !startY) return;
        
        endX = e.touches[0].clientX;
        endY = e.touches[0].clientY;
        
        const diffX = startX - endX;
        const diffY = startY - endY;
        
        // Si el desplazamiento horizontal es mayor que el vertical, prevenir el scroll
        if (Math.abs(diffX) > Math.abs(diffY)) {
          e.preventDefault();
        }
      }, { passive: false });
      
      track.addEventListener('touchend', e => {
        if (!startX || !endX) return;
        
        const diffX = startX - endX;
        
        if (Math.abs(diffX) > 50) {
          if (diffX > 0) {
            goToSlide(currentIndex + 1); // Deslizar a la derecha
          } else {
            goToSlide(currentIndex - 1); // Deslizar a la izquierda
          }
        }
        
        startX = null;
        endX = null;
        toggleAutoplay();
      }, { passive: true });
      
      // Inicializar
      updateSlidesPerView();
      toggleAutoplay();
      
      // Actualizar en resize
      window.addEventListener('resize', updateSlidesPerView);
    });
  });
</script>

{% schema %}
{
  "name": "Testimonios Slider",
  "settings": [
    {
      "type": "header",
      "content": "Configuración General"
    },
    {
      "type": "text",
      "id": "testimonios_title",
      "label": "Título de la sección",
      "default": "TESTIMONIOS"
    },
    {
      "type": "header",
      "content": "Configuración del Slider"
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Reproducción automática",
      "default": true
    },
    {
      "type": "range",
      "id": "autoplay_speed",
      "min": 2000,
      "max": 8000,
      "step": 500,
      "unit": "ms",
      "label": "Velocidad de reproducción automática",
      "default": 4000
    },
    {
      "type": "select",
      "id": "slides_per_view_desktop",
      "label": "Testimonios por vista (escritorio)",
      "options": [
        {
          "value": "1",
          "label": "1 testimonio"
        },
        {
          "value": "2",
          "label": "2 testimonios"
        },
        {
          "value": "3",
          "label": "3 testimonios"
        }
      ],
      "default": "2"
    },
    {
      "type": "range",
      "id": "slide_spacing_mobile",
      "min": 5,
      "max": 30,
      "step": 5,
      "unit": "px",
      "label": "Espacio entre slides (móvil)",
      "default": 10
    },
    {
      "type": "range",
      "id": "slide_spacing_desktop",
      "min": 10,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Espacio entre slides (escritorio)",
      "default": 20
    },
    {
      "type": "header",
      "content": "Configuración de Título y Línea"
    },
    {
      "type": "range",
      "id": "title_size_mobile",
      "min": 20,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Tamaño título (móvil)",
      "default": 26
    },
    {
      "type": "range",
      "id": "title_size_desktop",
      "min": 24,
      "max": 80,
      "step": 2,
      "unit": "px",
      "label": "Tamaño título (escritorio)",
      "default": 32
    },
    {
      "type": "color",
      "id": "line_color",
      "label": "Color de la línea",
      "default": "#FF0000"
    },
    {
      "type": "range",
      "id": "line_width_mobile",
      "min": 50,
      "max": 300,
      "step": 10,
      "unit": "px",
      "label": "Ancho de línea (móvil)",
      "default": 100
    },
    {
      "type": "range",
      "id": "line_width_desktop",
      "min": 50,
      "max": 500,
      "step": 10,
      "unit": "px",
      "label": "Ancho de línea (escritorio)",
      "default": 200
    },
    {
      "type": "range",
      "id": "line_height",
      "min": 1,
      "max": 10,
      "step": 1,
      "unit": "px",
      "label": "Altura de la línea",
      "default": 3
    },
    {
      "type": "range",
      "id": "line_margin_top",
      "min": 0,
      "max": 30,
      "step": 1,
      "unit": "px",
      "label": "Espacio entre título y línea",
      "default": 10
    },
    {
      "type": "header",
      "content": "Estilos de Tarjeta"
    },
    {
      "type": "color",
      "id": "card_background_color",
      "label": "Color de fondo de la tarjeta",
      "default": "#FFFFFF"
    },
    {
      "type": "range",
      "id": "card_border_radius",
      "min": 0,
      "max": 30,
      "step": 1,
      "unit": "px",
      "label": "Radio de borde de la tarjeta",
      "default": 10
    },
    {
      "type": "range",
      "id": "card_padding",
      "min": 10,
      "max": 40,
      "step": 5,
      "unit": "px",
      "label": "Padding interno de la tarjeta",
      "default": 20
    },
    {
      "type": "range",
      "id": "card_shadow_x",
      "min": 0,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Sombra X",
      "default": 0
    },
    {
      "type": "range",
      "id": "card_shadow_y",
      "min": 0,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Sombra Y",
      "default": 5
    },
    {
      "type": "range",
      "id": "card_shadow_blur",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Desenfoque de sombra",
      "default": 15
    },
    {
      "type": "color",
      "id": "card_shadow_color",
      "label": "Color de sombra",
      "default": "rgba(0,0,0,0.1)"
    },
    {
      "type": "header",
      "content": "Avatar/Logo"
    },
    {
      "type": "range",
      "id": "avatar_size",
      "min": 40,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Tamaño del avatar/logo",
      "default": 60
    },
    {
      "type": "range",
      "id": "avatar_border_radius",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "%",
      "label": "Radio de borde del avatar",
      "default": 50
    },
    {
      "type": "color",
      "id": "avatar_background_color",
      "label": "Color de fondo del logo",
      "default": "#FFCC00"
    },
    {
      "type": "color",
      "id": "avatar_text_color",
      "label": "Color de texto del logo",
      "default": "#FFFFFF"
    },
    {
      "type": "header",
      "content": "Texto y Colores"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Color de texto testimonio",
      "default": "#333333"
    },
    {
      "type": "range",
      "id": "text_size_mobile",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Tamaño texto testimonio (móvil)",
      "default": 14
    },
    {
      "type": "range",
      "id": "text_size_desktop",
      "min": 14,
      "max": 28,
      "step": 1,
      "unit": "px",
      "label": "Tamaño texto testimonio (escritorio)",
      "default": 16
    },
    {
      "type": "color",
      "id": "author_color",
      "label": "Color de texto autor",
      "default": "#666666"
    },
    {
      "type": "range",
      "id": "author_size_mobile",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Tamaño texto autor (móvil)",
      "default": 13
    },
    {
      "type": "range",
      "id": "author_size_desktop",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Tamaño texto autor (escritorio)",
      "default": 14
    },
    {
      "type": "header",
      "content": "Video"
    },
    {
      "type": "range",
      "id": "video_border_radius",
      "min": 0,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Radio de borde del video",
      "default": 8
    },
    {
      "type": "header",
      "content": "Controles del Slider"
    },
    {
      "type": "color",
      "id": "arrow_color",
      "label": "Color de flechas",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "arrow_background_color",
      "label": "Color de fondo de flechas",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "arrow_hover_color",
      "label": "Color de flechas (hover)",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "arrow_hover_background_color",
      "label": "Color de fondo de flechas (hover)",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "dot_color",
      "label": "Color de indicadores",
      "default": "#CCCCCC"
    },
    {
      "type": "color",
      "id": "dot_active_color",
      "label": "Color de indicador activo",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Botón de WhatsApp"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Texto del botón",
      "default": "QUIERO ACCEDER AL GRUPO DE WHATSAPP"
    },
    {
      "type": "text",
      "id": "button_link",
      "label": "Enlace del botón",
      "default": "https://wa.me/573000000000"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Color del botón",
      "default": "#25D366"
    },
    {
      "type": "checkbox",
      "id": "button_shake_effect",
      "label": "Efecto de sacudida",
      "default": true
    },
    {
      "type": "range",
      "id": "button_padding_vertical",
      "min": 5,
      "max": 40,
      "step": 1,
      "unit": "px",
      "label": "Espaciado vertical del botón",
      "default": 16
    },
    {
      "type": "range",
      "id": "button_padding_horizontal",
      "min": 10,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Espaciado horizontal del botón",
      "default": 30
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 0,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Redondeo del botón",
      "default": 12
    },
    {
      "type": "range",
      "id": "button_text_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Tamaño del texto del botón",
      "default": 14
    },
    {
      "type": "range",
      "id": "button_spacing",
      "min": 10,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Espaciado superior del botón",
      "default": 40
    },
    {
      "type": "header",
      "content": "Fondo y Espaciados"
    },
    {
      "type": "color",
      "id": "background_color_start",
      "label": "Color de fondo inicial",
      "default": "#F8F8F8"
    },
    {
      "type": "color",
      "id": "background_color_end",
      "label": "Color de fondo final",
      "default": "#F8F8F8"
    },
    {
      "type": "range",
      "id": "gradient_angle",
      "min": 0,
      "max": 360,
      "step": 5,
      "unit": "°",
      "label": "Ángulo del degradado",
      "default": 0
    },
    {
      "type": "range",
      "id": "container_width",
      "min": 800,
      "max": 2000,
      "step": 50,
      "unit": "px",
      "label": "Ancho máximo del contenedor",
      "default": 1200
    },
    {
      "type": "range",
      "id": "container_padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Padding horizontal",
      "default": 20
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "min": 0,
      "max": 100,
      "step": 10,
      "unit": "px",
      "label": "Padding superior (móvil)",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "min": 0,
      "max": 100,
      "step": 10,
      "unit": "px",
      "label": "Padding inferior (móvil)",
      "default": 40
    },
    {
      "type": "range",
      "id": "margin_bottom_mobile",
      "min": -200,
      "max": 100,
      "step": 10,
      "unit": "px",
      "label": "Margen inferior (móvil)",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_top_desktop",
      "min": 0,
      "max": 150,
      "step": 10,
      "unit": "px",
      "label": "Padding superior (escritorio)",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom_desktop",
      "min": 0,
      "max": 150,
      "step": 10,
      "unit": "px",
      "label": "Padding inferior (escritorio)",
      "default": 60
    },
    {
      "type": "range",
      "id": "margin_bottom_desktop",
      "min": -200,
      "max": 100,
      "step": 10,
      "unit": "px",
      "label": "Margen inferior (escritorio)",
      "default": 0
    }
  ],
  "blocks": [
    {
      "type": "testimonio_texto",
      "name": "Testimonio (Texto)",
      "settings": [
        {
          "type": "textarea",
          "id": "testimonio",
          "label": "Testimonio",
          "default": "No lo podía creer, con solo $10,000 participé y en menos de una semana ya tenía $700,000 en mis manos. Nunca había ganado nada antes, pero esta dinámica es real. Ahora uso ese dinero para pagar varias deudas de mi casa, recomiendo participar sin pensarlo dos veces."
        },
        {
          "type": "text",
          "id": "autor",
          "label": "Autor",
          "default": "Ana María López"
        },
        {
          "type": "image_picker",
          "id": "imagen_perfil",
          "label": "Imagen de perfil (opcional)"
        }
      ]
    },
    {
      "type": "testimonio_video",
      "name": "Testimonio (Video)",
      "settings": [
        {
          "type": "text",
          "id": "autor",
          "label": "Autor",
          "default": "Juan Pérez"
        },
        {
          "type": "text",
          "id": "video_url",
          "label": "URL del video (YouTube o Vimeo)",
          "info": "Ej: https://www.youtube.com/watch?v=XXXXXXXXXXX"
        },
        {
          "type": "video",
          "id": "video_file",
          "label": "Archivo de video",
          "info": "Sube un archivo MP4 directamente"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonios Slider",
      "category": "Testimonios",
      "blocks": [
        {
          "type": "testimonio_texto"
        },
        {
          "type": "testimonio_texto"
        },
        {
          "type": "testimonio_video"
        }
      ]
    }
  ]
}
{% endschema %}
